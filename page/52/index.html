<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-Ss7c9LFzfb" />
<meta name="bytedance-verification-code" content="GHbi5zMz8c6TSVpY9rLD" />







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="some program,some life,some code, and some linux">
<meta property="og:type" content="website">
<meta property="og:title" content="Resive world">
<meta property="og:url" content="https://www.resonanat.com/page/52/index.html">
<meta property="og:site_name" content="Resive world">
<meta property="og:description" content="some program,some life,some code, and some linux">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Companyd">
<meta property="article:tag" content="ubuntu linux java elasitesearch">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.resonanat.com/page/52/"/>



<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4636539228226058"
     crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-67H9TCZZ7N"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-67H9TCZZ7N');
</script>


  <title>Resive world - Come world to Record life</title>
  








<meta name="generator" content="Hexo 7.1.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Resive world</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Come world to Record life</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/19/Linux%E4%B8%8B%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7imagemagick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/19/Linux%E4%B8%8B%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7imagemagick/" itemprop="url">Linux下的图片格式转换工具imagemagick</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-19T15:54:04+00:00">
                2015-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在玩Processing的时候，经常需要将大量的png文件作为帧，处理到gif图中。而他自带的插件似乎并没有用，所以就想在网上找个。网上当然有很多这种类型的工具啦，但是基本上都是像gimp这样的类Photoshop软件，虽然功能强大，但是为了这点小事还下一个这么大的软件，而且还不能用命令行。这显然不是Linux的精神。找了半天，终于找到了非常方便就能生成gif的小命令–<strong>imagemagick</strong>，用法简单而且还可以压缩，可以说是非常好用。</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><code>myths@myths-X450LD:~$ sudo apt-get install imagemagick</code></p>
<p>简单易懂不罗嗦。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>１、生成<br><code>myths@myths-X450LD:~$ convert *.jpg out.gif</code><br>将当前文件夹下的*.jpg　压缩到out.gif，简单明了。</p>
<p>２、压缩<br><code>myths@myths-X450LD:~$ convert out.gif -fuzz 10% -layers Optimize optimized.gif</code><br>这里用了-fuzz 参数，用man查看帮助文档可以看到这一句：<br><code>-fuzz distance ：　colors within this distance are considered equal</code><br>就是模糊化处理的意思，一般距离参数选的是10%。</p>
<p>然后是-layers Optimize 表示优化的意思。</p>
<p>一般这样压缩gif效果非常明显通常能压缩到3%左右～～</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/18/%E5%9F%BA%E4%BA%8Estdarg.h%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/18/%E5%9F%BA%E4%BA%8Estdarg.h%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95/" itemprop="url">基于stdarg.h的可变参数函数的用法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-18T16:02:55+00:00">
                2015-11-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-C/" itemprop="url" rel="index">
                    <span itemprop="name">C/C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>.在开始学习C语言的函数的时候，我们就知道函数的参数个数应该是在函数声明的时候就指定的，这一点我们没有任何疑问。但是不知道大家有没有注意到我们的printf()函数，他的函数参数理论上并不是确定的，而是随着匹配字符串中的格式控制符的个数控制的。其实当时也没有注意到这一点，到是最近，偶然间看到了<a target="_blank" rel="noopener" href="http://book.douban.com/subject/25703412/">《嗨翻C语言》</a>这本书，这里就详细讲解了这种可变参数函数的实现原理，今天考试间隙就顺带学习了一下，其实就是一种方法，知道了就晓得了，也是非常的简单。</p>
<h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><p>这个用法需要引用一些宏，这些宏定义在C标准库“stdarg.h”中，(当然C++中就是“cstdarg”了)。</p>
<h2 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int fun(int arg1,int arg2, ...)&#123;</span><br><span class="line">//foo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里可以用普通传参方法传入几个固定参数，一般情况下会有个表示可变参数的个数(否则函数也不晓得你到底传给了他啥)，最后表示可变参数部分的是三个连续的点，注意中间不能有空格。我们传入的可变参数就是在这里的。</p>
<h2 id="具体用法"><a href="#具体用法" class="headerlink" title="具体用法"></a>具体用法</h2><p>这里主要涉及到va_list类型，va_start()、va_arg()、va_end()这几个函数。</p>
<p>va_list 可以理解为以链表的形式保存那些可变参数的一个数据类型（既然是链表，当然是可变的了）。</p>
<p>void va_start(va_list ap , int len); 接受两个参数，一个是上面的那个东西，还有一个表示数据的数目。目测可以理解为是自动收集传给本函数的可变参数，并连带他的数目，将信息赋给 va_list 。</p>
<p>type va_arg(va_list ap , type ); 接受两个参数，一个是va_list，另一个是保存的数据的类型。因为在调用参数的时候，编译器不会检查实际输入的是什么参数，所以需要适时的指定，并以那个类型返回。注意，这时候在va_list中的某个指针会指向下一个元素，所以下一次调用时输出的值就是下一个元素。在这一点上用法类似于iterator。</p>
<p>void va_end(va_list ap);最后清理这个va_list.</p>
<h2 id="演示源码"><a href="#演示源码" class="headerlink" title="演示源码"></a>演示源码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> arg,...)</span></span>&#123;</span><br><span class="line">	va_list ap;</span><br><span class="line">	<span class="built_in">va_start</span>(ap, arg);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arg; i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, <span class="built_in">va_arg</span>(ap,<span class="type">int</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">va_end</span>(ap);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">print</span>(<span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果自然是输出 1 2 3 4。</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>虽然看上去效果很酷，但是实际上据说这种用法的确很不安全，容易造成运行错误，所以还是尽量要少用。这种类似的问题如果能用重载或者类来解决的话还是少用可变参数函数吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/17/%E8%A7%A3%E5%86%B3Hdoj3337%E9%97%AE%E9%A2%98%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/17/%E8%A7%A3%E5%86%B3Hdoj3337%E9%97%AE%E9%A2%98%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/" itemprop="url">解决Hdoj3337问题的简易爬虫</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-17T11:28:23+00:00">
                2015-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是好久前遇到的一道非主流题，当时愣是没弄明白题意。最近闲着没事翻开来看了看，并在网上找到了某大牛写的爬虫，写的真美，顿觉的有必要收藏一下。虽然现在不能完全看懂，但是我想不久的将来，当我想系统的学Python的时候，这肯定是很有用的东西。<br><a target="_blank" rel="noopener" href="http://acm.hdu.edu.cn/showproblem.php?pid=3337">Hdoj3337</a></p>
<p>题目非常短，主要是这句话：</p>
<p>There is only one line in the input. It is a sentence which implies some integer. The length of the sentence is no more than 16. The sentence contains only letters(both uppercase and lowercase), digits, and whitespace. You may assume the given sentence is written in standard English, and always implies exactly one single integer.</p>
<p>意思就是给你一句话，让你写出这句话“imply”的一个数字。。。然而你并不知道imply是什么意思，所以你必须知道他给的这句话是什么，因此解决这道题的标准做法就是通过ＯＪ提供的　AC，WA，TLE，MLE 等提示来对样例进行数据挖掘，具体做法就是类似二分的东西，通过多次提交来确定每一位的字母是什么。</p>
<p>以下是大牛写的程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">status_url = <span class="string">&#x27;http://acm.hdu.edu.cn/status.php&#x27;</span></span><br><span class="line">submit_url = <span class="string">&#x27;http://acm.hdu.edu.cn/submit.php&#x27;</span></span><br><span class="line">login_url = <span class="string">&#x27;http://acm.hdu.edu.cn/userloginex.php&#x27;</span></span><br><span class="line">homepage_url = <span class="string">&#x27;http://acm.hdu.edu.cn/&#x27;</span></span><br><span class="line">language = &#123;&#125;</span><br><span class="line">language[<span class="string">&#x27;G++&#x27;</span>] = <span class="number">1</span></span><br><span class="line">language[<span class="string">&#x27;GCC&#x27;</span>] = <span class="number">2</span></span><br><span class="line">language[<span class="string">&#x27;C++&#x27;</span>] = <span class="number">3</span></span><br><span class="line">language[<span class="string">&#x27;C&#x27;</span>] = <span class="number">4</span></span><br><span class="line">language[<span class="string">&#x27;Pascal&#x27;</span>] = <span class="number">5</span></span><br><span class="line">language[<span class="string">&#x27;Java&#x27;</span>] = <span class="number">6</span></span><br><span class="line">language[<span class="string">&#x27;C#&#x27;</span>] = <span class="number">7</span></span><br><span class="line">file_data = []</span><br><span class="line">previous_runid = <span class="string">&#x27;&#x27;</span></span><br><span class="line">greater = <span class="string">&#x27;Time Limit Exceeded&#x27;</span></span><br><span class="line">less = <span class="string">&#x27;Output Limit Exceeded&#x27;</span></span><br><span class="line">equal = <span class="string">&#x27;Wrong Answer&#x27;</span></span><br><span class="line">username = <span class="string">&#x27;your username&#x27;</span></span><br><span class="line">userpass = <span class="string">&#x27;your password&#x27;</span></span><br><span class="line">template_input_data = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">#include &lt;cstdio&gt;</span></span><br><span class="line"><span class="string">#include &lt;cstdlib&gt;</span></span><br><span class="line"><span class="string">char buffer[0x10000];//64KB</span></span><br><span class="line"><span class="string">// Wrong Answer</span></span><br><span class="line"><span class="string">void equal(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	printf(&quot;www.hoxily.com\n&quot;);</span></span><br><span class="line"><span class="string">	exit(0);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// OLE</span></span><br><span class="line"><span class="string">void less(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	while (true)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		fwrite(buffer, sizeof(char), sizeof(buffer), stdout);</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// TLE</span></span><br><span class="line"><span class="string">void greater(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	while (true)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">int main(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	int ch;</span></span><br><span class="line"><span class="string">	int count = 0;</span></span><br><span class="line"><span class="string">	while ((ch = getchar()) != EOF)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		if (ch &lt; 0)</span></span><br><span class="line"><span class="string">		&#123;</span></span><br><span class="line"><span class="string">			ch = ch + 256;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">		if (count == skip)</span></span><br><span class="line"><span class="string">		&#123;</span></span><br><span class="line"><span class="string">			if (ch == guess)</span></span><br><span class="line"><span class="string">			&#123;</span></span><br><span class="line"><span class="string">				equal();</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">			else if (ch &lt; guess)</span></span><br><span class="line"><span class="string">			&#123;</span></span><br><span class="line"><span class="string">				less();</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">			else</span></span><br><span class="line"><span class="string">			&#123;</span></span><br><span class="line"><span class="string">				greater();</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">		count++;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">template_input_length = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">#include &lt;cstdio&gt;</span></span><br><span class="line"><span class="string">#include &lt;cstdlib&gt;</span></span><br><span class="line"><span class="string">#define MAXLEN 0x7fffffff</span></span><br><span class="line"><span class="string">#define MINLEN 0</span></span><br><span class="line"><span class="string">char buffer[0x10000];//64KB</span></span><br><span class="line"><span class="string">// Wrong Answer</span></span><br><span class="line"><span class="string">void equal(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	printf(&quot;www.hoxily.com\n&quot;);</span></span><br><span class="line"><span class="string">	exit(0);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// OLE</span></span><br><span class="line"><span class="string">void less(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	while (true)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		fwrite(buffer, sizeof(char), sizeof(buffer), stdout);</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// TLE</span></span><br><span class="line"><span class="string">void greater(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	while (true)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">int main(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">	int ch;</span></span><br><span class="line"><span class="string">	int count = 0;</span></span><br><span class="line"><span class="string">	while ((ch = getchar()) != EOF)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		count++;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	if (count &lt; guess)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		less();</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	else if (count == guess)</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		equal();</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	else</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		greater();</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">cookies = &#123;<span class="string">&#x27;exesubmitlang&#x27;</span>:<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;CNZZDATA1254072405&#x27;</span>: <span class="string">&#x27;965477099-1421749361-|1427515514&#x27;</span>&#125;</span><br><span class="line">pid = <span class="number">1000</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">referer</span>):</span><br><span class="line">    <span class="keyword">global</span> cookies</span><br><span class="line">    headers = &#123;<span class="string">&#x27;referer&#x27;</span>:referer, <span class="string">&#x27;user-agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 6.3; WOW64; rv:36.0) Gecko/20100101 Firefox/36.0&#x27;</span>&#125;</span><br><span class="line">    r = requests.post(login_url, params=&#123;<span class="string">&#x27;action&#x27;</span>:<span class="string">&#x27;login&#x27;</span>&#125;, data=&#123;<span class="string">&#x27;username&#x27;</span>:username,<span class="string">&#x27;userpass&#x27;</span>:userpass, <span class="string">&#x27;login&#x27;</span>:<span class="string">&#x27;Sign+In&#x27;</span>&#125;, headers = headers, cookies=cookies)</span><br><span class="line">    <span class="keyword">if</span> r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        cookies[<span class="string">&#x27;PHPSESSID&#x27;</span>] = r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>)</span><br><span class="line">    <span class="comment">#print(repr(cookies))</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_length_submit</span>(<span class="params">guess</span>):</span><br><span class="line">    usercode = <span class="string">&#x27;int guess = &#x27;</span> + <span class="built_in">str</span>(guess) + <span class="string">&#x27;;rn&#x27;</span> + template_input_length</span><br><span class="line">    <span class="keyword">return</span> test_submit(usercode)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_input_length</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;GUESS&#x27;</span>, <span class="string">&#x27;RESULT&#x27;</span>)</span><br><span class="line">    guess = <span class="number">1</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        result = test_length_submit(guess)</span><br><span class="line">        <span class="built_in">print</span>(guess, result)</span><br><span class="line">        <span class="keyword">if</span> result == <span class="string">&#x27;lt&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            left = guess</span><br><span class="line">            guess = guess * <span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;LEFT&#x27;</span>, <span class="string">&#x27;RIGHT&#x27;</span>, <span class="string">&#x27;GUESS&#x27;</span>, <span class="string">&#x27;RESULT&#x27;</span>)</span><br><span class="line">    right = guess</span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        guess = (left + right) // <span class="number">2</span></span><br><span class="line">        result = test_length_submit(guess)</span><br><span class="line">        <span class="built_in">print</span>(left, right, guess, result)</span><br><span class="line">        <span class="keyword">if</span> result == <span class="string">&#x27;eq&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;length =&#x27;</span>, guess)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">elif</span> result == <span class="string">&#x27;gt&#x27;</span>:</span><br><span class="line">            left = guess + <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> result == <span class="string">&#x27;lt&#x27;</span>:</span><br><span class="line">            right = guess - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> guess</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_submit</span>(<span class="params">usercode</span>):</span><br><span class="line">    <span class="keyword">global</span> cookies</span><br><span class="line">    headers = &#123;<span class="string">&#x27;referer&#x27;</span>:<span class="string">&#x27;http://acm.hdu.edu.cn/showproblem.php?pid=&#x27;</span> + <span class="built_in">str</span>(pid), <span class="string">&#x27;user-agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 6.3; WOW64; rv:36.0) Gecko/20100101 Firefox/36.0&#x27;</span>&#125;</span><br><span class="line">    r = requests.get(submit_url, params=&#123;<span class="string">&#x27;pid&#x27;</span>:pid&#125;, allow_redirects=<span class="literal">False</span>, cookies=cookies, headers=headers)</span><br><span class="line">    <span class="keyword">if</span> r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        cookies[<span class="string">&#x27;PHPSESSID&#x27;</span>] = r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>)</span><br><span class="line">    <span class="comment">#print(repr(cookies))</span></span><br><span class="line">    <span class="keyword">if</span> r.status_code == <span class="number">302</span>:</span><br><span class="line">        <span class="comment"># need login</span></span><br><span class="line">        login(r.url)</span><br><span class="line">    r = requests.post(submit_url, params=&#123;<span class="string">&#x27;action&#x27;</span>:<span class="string">&#x27;submit&#x27;</span>&#125;, data=&#123;<span class="string">&#x27;check&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;problemid&#x27;</span>:pid, <span class="string">&#x27;language&#x27;</span>:language[<span class="string">&#x27;C++&#x27;</span>]-<span class="number">1</span>, <span class="string">&#x27;usercode&#x27;</span>:usercode&#125;, allow_redirects=<span class="literal">False</span>, cookies = cookies, headers=headers)</span><br><span class="line">    <span class="keyword">if</span> r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        cookies[<span class="string">&#x27;PHPSESSID&#x27;</span>] = r.cookies.get(<span class="string">&#x27;PHPSESSID&#x27;</span>)</span><br><span class="line">    <span class="comment">#print(repr(cookies))</span></span><br><span class="line">    <span class="comment"># if r.status_code != 302:</span></span><br><span class="line">        <span class="comment"># raise Exception(r)</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="keyword">global</span> previous_runid</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        r = requests.get(status_url, params=&#123;<span class="string">&#x27;user&#x27;</span>:username, <span class="string">&#x27;lang&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;status&#x27;</span>:<span class="number">0</span>&#125;, headers=headers,cookies=cookies)</span><br><span class="line">        text = r.text</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            index = text.index(<span class="string">&#x27;tr align=center&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="comment"># server is busy so that return something else.</span></span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        index = text.index(<span class="string">&#x27;px&gt;&#x27;</span>, index)</span><br><span class="line">        index += <span class="built_in">len</span>(<span class="string">&#x27;px&gt;&#x27;</span>)</span><br><span class="line">        endIndex = text.index(<span class="string">&#x27;&lt;/td&gt;&#x27;</span>, index)</span><br><span class="line">        runid = text[index:endIndex]</span><br><span class="line">        <span class="keyword">if</span> runid == previous_runid: <span class="comment"># submit failed</span></span><br><span class="line">            <span class="keyword">return</span> test_submit(usercode)</span><br><span class="line">        index = text.index(<span class="string">&#x27;green&gt;&#x27;</span>, index)</span><br><span class="line">        index = index + <span class="built_in">len</span>(<span class="string">&#x27;green&gt;&#x27;</span>)</span><br><span class="line">        endIndex = text.index(<span class="string">&#x27;&lt;/font&gt;&#x27;</span>, index)</span><br><span class="line">        status = text[index: endIndex]</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;Queuing&#x27;</span> <span class="keyword">in</span> status:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&#x27;Compiling&#x27;</span> <span class="keyword">in</span> status:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&#x27;Running&#x27;</span> <span class="keyword">in</span> status:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> less <span class="keyword">in</span> status:</span><br><span class="line">            previous_runid = runid</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;lt&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> greater <span class="keyword">in</span> status:</span><br><span class="line">            previous_runid = runid</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;gt&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> equal <span class="keyword">in</span> status:</span><br><span class="line">            previous_runid = runid</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;eq&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&#x27;unknow judge status: &#x27;</span> + status)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_data_submit</span>(<span class="params">skip, guess</span>):</span><br><span class="line">    usercode = <span class="string">&#x27;int guess = &#x27;</span> + <span class="built_in">str</span>(guess) + <span class="string">&#x27;;rn&#x27;</span></span><br><span class="line">    usercode = usercode + <span class="string">&#x27;int skip = &#x27;</span> + <span class="built_in">str</span>(skip) + <span class="string">&#x27;;rn&#x27;</span></span><br><span class="line">    usercode = usercode + template_input_data</span><br><span class="line">    <span class="keyword">return</span> test_submit(usercode)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_input_data</span>():</span><br><span class="line">    length = find_input_length()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;LEFT&#x27;</span>, <span class="string">&#x27;RIGHT&#x27;</span>, <span class="string">&#x27;SKIP&#x27;</span>, <span class="string">&#x27;GUESS&#x27;</span>, <span class="string">&#x27;RESULT&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> skip <span class="keyword">in</span> <span class="built_in">range</span>(length):</span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        right = <span class="number">255</span></span><br><span class="line">        <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">            guess = (left + right) // <span class="number">2</span></span><br><span class="line">            result = test_data_submit(skip, guess)</span><br><span class="line">            <span class="built_in">print</span>(left, right, skip, guess, result)</span><br><span class="line">            <span class="keyword">if</span> result == <span class="string">&#x27;eq&#x27;</span>:</span><br><span class="line">                file_data.append(guess)</span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">repr</span>(file_data))</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> result == <span class="string">&#x27;lt&#x27;</span>:</span><br><span class="line">                right = guess -<span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> result == <span class="string">&#x27;gt&#x27;</span>:</span><br><span class="line">                left = guess + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> left &gt; right:</span><br><span class="line">            file_data.append(<span class="string">&#x27;UNKNOWN&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> file_data</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;usage:ndiginput.py &lt;pid&gt; &lt;username&gt; &lt;userpass&gt;&#x27;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    pid = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">    username = sys.argv[<span class="number">2</span>]</span><br><span class="line">    userpass = sys.argv[<span class="number">3</span>]</span><br><span class="line">    find_input_data()</span><br></pre></td></tr></table></figure>
<p>代码的思路也很清楚，就是对每一个字母用二分查找爬出他的值。</p>
<p>执行一下:<br><code>myths@myths-X450LD:~/Desktop$ python hdu.py 3337 &lt;用户名&gt; &lt;密码&gt;</code><br>等个十几分钟，大概系统提交了１００多发，得到了输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">(&#x27;GUESS&#x27;, &#x27;RESULT&#x27;)</span><br><span class="line">(1, &#x27;gt&#x27;)</span><br><span class="line">(2, &#x27;gt&#x27;)</span><br><span class="line">(4, &#x27;gt&#x27;)</span><br><span class="line">(8, &#x27;gt&#x27;)</span><br><span class="line">(16, &#x27;lt&#x27;)</span><br><span class="line">(&#x27;LEFT&#x27;, &#x27;RIGHT&#x27;, &#x27;GUESS&#x27;, &#x27;RESULT&#x27;)</span><br><span class="line">(8, 16, 12, &#x27;gt&#x27;)</span><br><span class="line">(13, 16, 14, &#x27;eq&#x27;)</span><br><span class="line">(&#x27;length =&#x27;, 14)</span><br><span class="line">(&#x27;LEFT&#x27;, &#x27;RIGHT&#x27;, &#x27;SKIP&#x27;, &#x27;GUESS&#x27;, &#x27;RESULT&#x27;)</span><br><span class="line">(0, 255, 0, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 0, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 0, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 0, 79, &#x27;gt&#x27;)</span><br><span class="line">(80, 94, 0, 87, &#x27;lt&#x27;)</span><br><span class="line">(80, 86, 0, 83, &#x27;gt&#x27;)</span><br><span class="line">(84, 86, 0, 85, &#x27;lt&#x27;)</span><br><span class="line">(84, 84, 0, 84, &#x27;eq&#x27;)</span><br><span class="line">[84]</span><br><span class="line">(0, 255, 1, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 1, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 1, 95, &#x27;gt&#x27;)</span><br><span class="line">(96, 126, 1, 111, &#x27;lt&#x27;)</span><br><span class="line">(96, 110, 1, 103, &#x27;gt&#x27;)</span><br><span class="line">(104, 110, 1, 107, &#x27;lt&#x27;)</span><br><span class="line">(104, 106, 1, 105, &#x27;lt&#x27;)</span><br><span class="line">(104, 104, 1, 104, &#x27;eq&#x27;)</span><br><span class="line">[84, 104]</span><br><span class="line">(0, 255, 2, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 2, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 2, 95, &#x27;gt&#x27;)</span><br><span class="line">(96, 126, 2, 111, &#x27;lt&#x27;)</span><br><span class="line">(96, 110, 2, 103, &#x27;lt&#x27;)</span><br><span class="line">(96, 102, 2, 99, &#x27;gt&#x27;)</span><br><span class="line">(100, 102, 2, 101, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101]</span><br><span class="line">(0, 255, 3, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 3, 63, &#x27;lt&#x27;)</span><br><span class="line">(0, 62, 3, 31, &#x27;gt&#x27;)</span><br><span class="line">(32, 62, 3, 47, &#x27;lt&#x27;)</span><br><span class="line">(32, 46, 3, 39, &#x27;lt&#x27;)</span><br><span class="line">(32, 38, 3, 35, &#x27;lt&#x27;)</span><br><span class="line">(32, 34, 3, 33, &#x27;lt&#x27;)</span><br><span class="line">(32, 32, 3, 32, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32]</span><br><span class="line">(0, 255, 4, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 4, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 4, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 4, 79, &#x27;lt&#x27;)</span><br><span class="line">(64, 78, 4, 71, &#x27;lt&#x27;)</span><br><span class="line">(64, 70, 4, 67, &#x27;lt&#x27;)</span><br><span class="line">(64, 66, 4, 65, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65]</span><br><span class="line">(0, 255, 5, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 5, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 5, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 5, 79, &#x27;gt&#x27;)</span><br><span class="line">(80, 94, 5, 87, &#x27;lt&#x27;)</span><br><span class="line">(80, 86, 5, 83, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83]</span><br><span class="line">(0, 255, 6, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 6, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 6, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 6, 79, &#x27;lt&#x27;)</span><br><span class="line">(64, 78, 6, 71, &#x27;lt&#x27;)</span><br><span class="line">(64, 70, 6, 67, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67]</span><br><span class="line">(0, 255, 7, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 7, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 7, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 7, 79, &#x27;lt&#x27;)</span><br><span class="line">(64, 78, 7, 71, &#x27;gt&#x27;)</span><br><span class="line">(72, 78, 7, 75, &#x27;lt&#x27;)</span><br><span class="line">(72, 74, 7, 73, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73]</span><br><span class="line">(0, 255, 8, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 8, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 8, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 8, 79, &#x27;lt&#x27;)</span><br><span class="line">(64, 78, 8, 71, &#x27;gt&#x27;)</span><br><span class="line">(72, 78, 8, 75, &#x27;lt&#x27;)</span><br><span class="line">(72, 74, 8, 73, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73]</span><br><span class="line">(0, 255, 9, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 9, 63, &#x27;lt&#x27;)</span><br><span class="line">(0, 62, 9, 31, &#x27;gt&#x27;)</span><br><span class="line">(32, 62, 9, 47, &#x27;lt&#x27;)</span><br><span class="line">(32, 46, 9, 39, &#x27;lt&#x27;)</span><br><span class="line">(32, 38, 9, 35, &#x27;lt&#x27;)</span><br><span class="line">(32, 34, 9, 33, &#x27;lt&#x27;)</span><br><span class="line">(32, 32, 9, 32, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73, 32]</span><br><span class="line">(0, 255, 10, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 10, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 10, 95, &#x27;gt&#x27;)</span><br><span class="line">(96, 126, 10, 111, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73, 32, 111]</span><br><span class="line">(0, 255, 11, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 11, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 11, 95, &#x27;gt&#x27;)</span><br><span class="line">(96, 126, 11, 111, &#x27;lt&#x27;)</span><br><span class="line">(96, 110, 11, 103, &#x27;lt&#x27;)</span><br><span class="line">(96, 102, 11, 99, &#x27;gt&#x27;)</span><br><span class="line">(100, 102, 11, 101, &#x27;gt&#x27;)</span><br><span class="line">(102, 102, 11, 102, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73, 32, 111, 102]</span><br><span class="line">(0, 255, 12, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 12, 63, &#x27;lt&#x27;)</span><br><span class="line">(0, 62, 12, 31, &#x27;gt&#x27;)</span><br><span class="line">(32, 62, 12, 47, &#x27;lt&#x27;)</span><br><span class="line">(32, 46, 12, 39, &#x27;lt&#x27;)</span><br><span class="line">(32, 38, 12, 35, &#x27;lt&#x27;)</span><br><span class="line">(32, 34, 12, 33, &#x27;lt&#x27;)</span><br><span class="line">(32, 32, 12, 32, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73, 32, 111, 102, 32]</span><br><span class="line">(0, 255, 13, 127, &#x27;lt&#x27;)</span><br><span class="line">(0, 126, 13, 63, &#x27;gt&#x27;)</span><br><span class="line">(64, 126, 13, 95, &#x27;lt&#x27;)</span><br><span class="line">(64, 94, 13, 79, &#x27;lt&#x27;)</span><br><span class="line">(64, 78, 13, 71, &#x27;gt&#x27;)</span><br><span class="line">(72, 78, 13, 75, &#x27;lt&#x27;)</span><br><span class="line">(72, 74, 13, 73, &#x27;lt&#x27;)</span><br><span class="line">(72, 72, 13, 72, &#x27;eq&#x27;)</span><br><span class="line">[84, 104, 101, 32, 65, 83, 67, 73, 73, 32, 111, 102, 32, 72]</span><br></pre></td></tr></table></figure>
<p>最后的一串数字转换为ASCII码就是“The ASCII of H”了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/16/%E5%88%A9%E7%94%A8chrome%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8B%E8%BD%BD%E8%A7%86%E9%A2%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/16/%E5%88%A9%E7%94%A8chrome%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8B%E8%BD%BD%E8%A7%86%E9%A2%91/" itemprop="url">利用chrome的缓存机制下载视频</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-16T15:48:08+00:00">
                2015-11-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Others/" itemprop="url" rel="index">
                    <span itemprop="name">Others</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>很多情况下，想要下载某奇艺某狐的视频的时候，非得需要登陆啊，会员啊才能下载。甚至有的根本不能下载，让人十分头大。而从我们专业的角度看，网页上的视频既然被你看到了，那么实际上就是被你下载（缓存）下来了，所以他禁止你下载其实就是在忽悠你，登陆网页本身就是下载html以及其媒体的过程。因此，让我们揭穿这些视频网站的谎言，愉快的看视频吧～</p>
<h2 id="Windows下路径"><a href="#Windows下路径" class="headerlink" title="Windows下路径"></a>Windows下路径</h2><p><code>C:/Users/Administrator/AppData/Local/Google/Chrome/User Data/Default/Pepper Data/Shockwave Flash/</code></p>
<ol>
<li>由于这个AppData目录是隐藏的，因此首先要在文件夹选项里勾选“显示隐藏的文件”选项。</li>
<li>找到这个目录，删掉里面的内容，然后打开需要加载的视频网页，在开始缓存视频文件的时候，这个Shockwave Flash文件夹下会出现类似”tmp”名字的文件，随着视频的缓存大小会不断加大，这个就是我们需要的缓存文件了，这里的文件在视频窗口关掉的同时就会被删除，所以别急着关视频窗口哦～等他缓冲好，拷贝出来，扩展名一改（一般的.mp4之类的都可以），直接用播放器就能看了～～</li>
</ol>
<h2 id="ubuntu下路径"><a href="#ubuntu下路径" class="headerlink" title="ubuntu下路径"></a>ubuntu下路径</h2><p><code>~/.cache/google-chrome/Default/Cache</code><br>就是在用户家目录下的这个地方，跟windows有所不同，也是找了好半天的。这个文件夹删了之后好像一时半会不会恢复，所以不要乱删～</p>
<p>在缓存视频的时候也是会不断刷出一些名字类似内存地址名的东西，这就是缓存的视频了。这里的文件在窗口关闭的时候并不会立刻删掉，比较迟钝～最后跟windows一样拷贝下来改个扩展名用播放器直接看了～～</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/15/Ubuntu%E4%B8%8B%E6%83%A0%E6%99%AE%E6%9C%80%E6%96%B0%E6%89%93%E5%8D%B0%E6%9C%BA%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/15/Ubuntu%E4%B8%8B%E6%83%A0%E6%99%AE%E6%9C%80%E6%96%B0%E6%89%93%E5%8D%B0%E6%9C%BA%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD/" itemprop="url">Ubuntu下惠普最新打印机驱动下载</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-15T15:55:59+00:00">
                2015-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原版ubuntu 14.04上安装的只支持的打印机版本太老了，新的打印机完全无法支持，之前每次需要打印都需要切换到windows下，甚是麻烦。后来想想，偌大的惠普怎么可能放弃Linux的打印机市场呢？所以最后终于下决心一定要找一个可用的驱动，也是累，终于找到了这个～纪念一下～～</p>
<p>直接上命令：<br><code>myths@myths-X450LD:~$ wget http://prdownloads.sourceforge.net/hplip/hplip-3.14.4.run</code><br>从 sourceforge 网站上找到的程序源码（其实是费劲千辛万苦百度到的）下载下来是一个可执行文件，会帮你从网上下载需要的部件，接下来给他执行权限，再执行就行了：</p>
<p><code>myths@myths-X450LD:~$ sudo chmod a+x hplip-3.14.4.run</code><br><code>myths@myths-X450LD:~$ ./hplip-3.14.4.run</code></p>
<p>当然，实际的下载网页是<a target="_blank" rel="noopener" href="http://prdownloads.sourceforge.net/hplip/">http://prdownloads.sourceforge.net/hplip/</a> ，这里应该是惠普官方托管Linux下驱动源码的地方，如果Ubuntu版本更新了，这里也会有更新版本的驱动。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/14/apache2%E4%B8%8D%E6%94%AF%E6%8C%81php5%E7%9A%84%E8%A7%A3%E6%9E%90%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/14/apache2%E4%B8%8D%E6%94%AF%E6%8C%81php5%E7%9A%84%E8%A7%A3%E6%9E%90%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" itemprop="url">apache2不支持php5的解析解决方案</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-14T15:23:31+00:00">
                2015-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Apache/" itemprop="url" rel="index">
                    <span itemprop="name">Apache</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天想写个php玩玩的结果突然发现我的apache2突然挂掉了，也不晓得怎么回事，于是就用彻底删除的命令<code>apt-get remove --purge apache2</code> 将他卸载然后重装。重装上去之后发现localhost可以打开了，但是php解析不了了。不光自己写的php无法解析，就连打开phpmyadmin也都变成了源码，十分的蛋疼。找了半天才发现原因是我在彻底卸载apache2的时候，–purge 参数把apache2对php5支持的模块也删掉了。。。。。所以，理所应当的死也登不上喽。</p>
<p>以下是解决方案，非常简单，就是安装那个迷失的模块：<br><code>myths@myths-X450LD:/etc/apache2$ sudo apt-get install libapache2-mod-php5</code><br>这个提供了apache2对php5支持的接口，有时候好像是在安装php5或者apache2的时候会默认附带的，所以很多情况下并不需要手动的去安装。但是当出了问题的时候，不晓得这个模块的存在可是非常恶心的事。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/11/%E5%AE%9E%E7%8E%B0SSH%E6%97%A0%E5%AF%86%E7%A0%81%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/11/%E5%AE%9E%E7%8E%B0SSH%E6%97%A0%E5%AF%86%E7%A0%81%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95/" itemprop="url">实现SSH无密码自动登录</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-11T15:58:09+00:00">
                2015-11-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SSH/" itemprop="url" rel="index">
                    <span itemprop="name">SSH</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在使用ssh登陆服务器的时候很蛋疼的事是每次登陆的时候都要输入服务器密码，而且为了安全性，密码一般都不短，大概都得十几位的样子，一不小心输错了还得重来，十分麻烦。所以实现SSH的自动登陆是一件非常方便的事情，避免了恶心蛋疼而且无聊重复的输密码环节。</p>
<p>当然，这种所谓的无密码登陆认证实际上是一种通过公钥加密方法来进行自动化认证的技术。所以这里也存在这公钥和私钥的说法，其中，公钥是保存在服务器中的，而私钥是保存在客户端中的。具体方法如下：</p>
<h2 id="产生密钥"><a href="#产生密钥" class="headerlink" title="产生密钥"></a>产生密钥</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">myths@myths-X450LD:~/.ssh$ ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/home/myths/.ssh/id_rsa): </span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /home/myths/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /home/myths/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">dc:ee:f5:9d:c9:2d:06:65:a8:ce:ce:65:8d:5d:98:08 myths@myths-X450LD</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|                 |</span><br><span class="line">|                 |</span><br><span class="line">|          E  .   |</span><br><span class="line">|       . . ...oo |</span><br><span class="line">|        S ...oo .|</span><br><span class="line">|         .. .+ . |</span><br><span class="line">|         o. =.o  |</span><br><span class="line">|         oo+ .+.+|</span><br><span class="line">|         .+  ..=o|</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure>
<p>这里使用ssh-keygen 命令，-t参数表示接下来跟的是加密类型（type），然后就是加密的算法，可以选择rsa1（老版的rsa），rsa（新版的rsa），dsa，ecdsa，ed25519　等。这里用作证书通常使用rsa算法。</p>
<p>然后会要求你填输出的文件夹，一般默认就摆在<code>/home/myths/.ssh/</code>下的id_rsa文件中吧。不过需要注意的是，如果曾经生成过密钥，现在重新生成一个的话，如果不改地址是会将原来的覆盖掉的，这样可能会惹一些麻烦的。。。</p>
<p>接下来你可以另外设置一个密码，这个密码相当于一个独立的连接服务器的密码，而不是服务器用户的密码。你就是相当于用这个密码来替代服务器的用户密码（这个密码的长度要大于四）。当然如果怕麻烦可以直接回车回车，表示不用这个密码。</p>
<p>到这一步密码就生成完了，在~&#x2F;.ssh&#x2F;下就有了生成的文件了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myths@myths-X450LD:~/.ssh$ ls </span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br></pre></td></tr></table></figure>
<p>当然这里的known_hosts 是本来就有的。生产的id_rsa为私钥，id_rsa.pub为公钥。</p>
<h2 id="上传公钥"><a href="#上传公钥" class="headerlink" title="上传公钥"></a>上传公钥</h2><p>接下来只要把公钥上传到服务器的对应位置上就可以了，这里用scp上传到<del>&#x2F;.ssh&#x2F;authorized_keys中：<br>&#96;myths@myths-X450LD:</del>&#x2F;.ssh$ scp id_rsa.pub root@myserver:~&#x2F;.ssh&#x2F;authorized_keys&#96;<br>当然这里这样写是因为我的服务器上并没有别的认证的密码，所以可以直接覆盖这个文件。否则就需要先上传，然后用&gt;&gt;添加到这个文件中了。</p>
<p>最后本地的id_rsa.pub文件删除即可。</p>
<h2 id="关闭密码登录"><a href="#关闭密码登录" class="headerlink" title="关闭密码登录"></a>关闭密码登录</h2><p>做到这里，就已经完成了免密码的登陆了。不过，既然已经不用输密码登陆了，那我们就不必留下用密码登陆的这个途径了。那我们就可以直接修改服务器端的配置，使得我们的ssh不接受直接用密码登陆，这样无疑提高了整个服务器的安全性，而又不影响使用。</p>
<p>这个配置文件为<code>/etc/ssh/sshd_config</code>，打开后默认是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"># Package generated configuration file</span><br><span class="line"># See the sshd_config(5) manpage for details</span><br><span class="line"></span><br><span class="line"># What ports, IPs and protocols we listen for</span><br><span class="line">Port 22</span><br><span class="line"># Use these options to restrict which interfaces/protocols sshd will bind to</span><br><span class="line">#ListenAddress ::</span><br><span class="line">#ListenAddress 0.0.0.0</span><br><span class="line">Protocol 2</span><br><span class="line"># HostKeys for protocol version 2</span><br><span class="line">HostKey /etc/ssh/ssh_host_rsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_dsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ed25519_key</span><br><span class="line">#Privilege Separation is turned on for security</span><br><span class="line">UsePrivilegeSeparation yes</span><br><span class="line"></span><br><span class="line"># Lifetime and size of ephemeral version 1 server key</span><br><span class="line">KeyRegenerationInterval 3600</span><br><span class="line">ServerKeyBits 1024</span><br><span class="line"></span><br><span class="line"># Logging</span><br><span class="line">LogLevel INFO</span><br><span class="line"></span><br><span class="line"># Authentication:</span><br><span class="line">LoginGraceTime 120</span><br><span class="line">StrictModes yes</span><br><span class="line"></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">#AuthorizedKeysFile	%h/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"># Don&#x27;t read the user&#x27;s ~/.rhosts and ~/.shosts files</span><br><span class="line">IgnoreRhosts yes</span><br><span class="line"># For this to work you will also need host keys in /etc/ssh_known_hosts</span><br><span class="line">RhostsRSAAuthentication no</span><br><span class="line"># similar for protocol version 2</span><br><span class="line">HostbasedAuthentication no</span><br><span class="line"># Uncomment if you don&#x27;t trust ~/.ssh/known_hosts for RhostsRSAAuthentication</span><br><span class="line">#IgnoreUserKnownHosts yes</span><br><span class="line"></span><br><span class="line"># To enable empty passwords, change to yes (NOT RECOMMENDED)</span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line"></span><br><span class="line"># Change to yes to enable challenge-response passwords (beware issues with</span><br><span class="line"># some PAM modules and threads)</span><br><span class="line">ChallengeResponseAuthentication no</span><br><span class="line"></span><br><span class="line"># Change to no to disable tunnelled clear text passwords</span><br><span class="line"></span><br><span class="line"># Kerberos options</span><br><span class="line">#KerberosAuthentication no</span><br><span class="line">#KerberosGetAFSToken no</span><br><span class="line">#KerberosOrLocalPasswd yes</span><br><span class="line">#KerberosTicketCleanup yes</span><br><span class="line"></span><br><span class="line"># GSSAPI options</span><br><span class="line">#GSSAPIAuthentication no</span><br><span class="line">#GSSAPICleanupCredentials yes</span><br><span class="line"></span><br><span class="line">X11Forwarding yes</span><br><span class="line">X11DisplayOffset 10</span><br><span class="line">PrintMotd no</span><br><span class="line">PrintLastLog yes</span><br><span class="line">TCPKeepAlive yes</span><br><span class="line">#UseLogin no</span><br><span class="line"></span><br><span class="line">#MaxStartups 10:30:60</span><br><span class="line">#Banner /etc/issue.net</span><br><span class="line"></span><br><span class="line"># Allow client to pass locale environment variables</span><br><span class="line">AcceptEnv LANG LC_*</span><br><span class="line"></span><br><span class="line">Subsystem sftp /usr/lib/openssh/sftp-server</span><br><span class="line"></span><br><span class="line"># Set this to &#x27;yes&#x27; to enable PAM authentication, account processing,</span><br><span class="line"># and session processing. If this is enabled, PAM authentication will</span><br><span class="line"># be allowed through the ChallengeResponseAuthentication and</span><br><span class="line"># PAM authentication via ChallengeResponseAuthentication may bypass</span><br><span class="line"># If you just want the PAM account and session checks to run without</span><br><span class="line"># and ChallengeResponseAuthentication to &#x27;no&#x27;.</span><br><span class="line">UsePAM yes</span><br><span class="line">UseDNS no</span><br><span class="line">AddressFamily inet</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">SyslogFacility AUTHPRIV</span><br><span class="line">PasswordAuthentication yes</span><br></pre></td></tr></table></figure>
<p>这里我们只要关注<br><code>PermitRootLogin yes</code><br>这一行，把他改成no然后再把ssh重启一下就好了。</p>
<p>如果发现这样配置完之后，仍然不能免密码登录，那多半是因为sshd_config配置里的<code>SAAuthentication yes</code>和<code>ubkeyAuthentication yes</code>这两个选项被注释了，把他们加回来即可。</p>
<h2 id="Last-but-not-least"><a href="#Last-but-not-least" class="headerlink" title="Last but not least"></a>Last but not least</h2><p>我一直在想，既然上述的免认证登录这么常见，为什么没有人写个脚本来帮助大家做这件事呢，然后果然在apt的软件包里找到了一个叫<code>sh-copy-id</code>的命令，通过<code>ssh-copy-id user@ip</code>能够非常方便的一次性执行上面的操作。&#96;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/10/fork%E7%82%B8%E5%BC%B9%E7%AE%80%E6%9E%90%E5%92%8C%E5%BA%94%E5%AF%B9%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/10/fork%E7%82%B8%E5%BC%B9%E7%AE%80%E6%9E%90%E5%92%8C%E5%BA%94%E5%AF%B9%E6%96%B9%E6%B3%95/" itemprop="url">fork炸弹简析和应对方法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-10T15:17:37+00:00">
                2015-11-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><p>第一次听到fork炸弹这种东西的时候以为是一个很神奇的破坏力惊人的高能脚本，然而稍微深入的了解了一下才发现这个玩意其实是个挺简单纯粹的东西，只是被一个叫Jaromil的家伙对他的精美包装给戏耍了。他在2002年给出了Linux下fork炸弹的最经典的形式：<br><code>myths@myths-X450LD:~$ :()&#123; :|:&amp; &#125;;:</code><br>一段非常忽悠人的代码，只有１３个字母，乍一看完全看不懂。。但其实这个代码的思路非常简单，就是递归的开一个新的进程，不断的开不断的开，直到操作系统崩溃。中招后唯一的解决办法就是拔电源重启。</p>
<p>作为长期写Ｃ语言的我们来说，看这段代码有一个很大的坎，就是标识符。Ｃ语言里的标识符是不会包含” : “这个东西的，然而这里的函数名恰恰就是这个“ : ”。所谓的fork炸弹，其实就是声明了一个函数，这个函数的名字叫做” : “　他的函数体是调用它本身，并且用管道将他的输出重定向到另一个该函数，并在后台运行。最后调用这个函数。稍微清楚的写法是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bomb()&#123;</span><br><span class="line">	bomb|bomb&amp;</span><br><span class="line">&#125;;</span><br><span class="line">bomb</span><br></pre></td></tr></table></figure>
<p>这样就清楚很多了，也就没啥神秘的了。</p>
<h2 id="后果"><a href="#后果" class="headerlink" title="后果"></a>后果</h2><p>这段代码执行的后果不用说，就是电脑死机。死机的原因就类似DDoS攻击一样，系统忙于处理这个垃圾程序生成的垃圾进程而无法分配给我们需要执行的程序。所以，一般没事做的话不要跑这个代码（话说我就无聊的跑了两遍）。</p>
<p>其实fork炸弹的危险性倒不是特别大，破坏力也不是特别强，毕竟重启一下就行了。Linux下也有其他拥有更强破坏力的命令，然而为什么都没有他有名呢？原因很简单，fork炸弹的执行不需要root权限！获取root权限实在不容易，而fork炸弹可以完全绕过这一点来对电脑进行破坏，所以这才厉害。</p>
<h2 id="预防"><a href="#预防" class="headerlink" title="预防"></a>预防</h2><p>预防fork命令的方法也很清楚，就是限制系统的最大进程数，这样就算运行了也不会死机了，就留给我们杀掉这个进程的机会了。</p>
<p>在这里我们可以通过ulimit命令来查看系统定义的最大进程数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">myths@myths-X450LD:~$ ulimit -a</span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 15261</span><br><span class="line">max locked memory       (kbytes, -l) 64</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 1024</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 8192</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 15261</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>
<p>注意倒数第三行，根据这一行我们就可以看到当前的最大进程数是15261，而且可以看到对应的参数是 -u，这样我们就可以进行修改了：<br><code>myths@myths-X450LD:~$ ulimit -u 200</code><br>这样下来最大进程数就是200了。</p>
<p>但是这样设置下来的数据只能在当前终端奏效，当关闭当前终端后，系统会重新调回默认值的。</p>
<p>所以最终的解决办法是修改配置文件。系统的配置文件是 &#x2F;etc&#x2F;security&#x2F;limits.conf　：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">myths@myths-X450LD:~$ cat /etc/security/limits.conf </span><br><span class="line"># /etc/security/limits.conf</span><br><span class="line">#</span><br><span class="line">#Each line describes a limit for a user in the form:</span><br><span class="line">#</span><br><span class="line">#&lt;domain&gt;        &lt;type&gt;  &lt;item&gt;  &lt;value&gt;</span><br><span class="line">#</span><br><span class="line">#Where:</span><br><span class="line">#&lt;domain&gt; can be:</span><br><span class="line">#        - a user name</span><br><span class="line">#        - a group name, with @group syntax</span><br><span class="line">#        - the wildcard *, for default entry</span><br><span class="line">#        - the wildcard %, can be also used with %group syntax,</span><br><span class="line">#                 for maxlogin limit</span><br><span class="line">#        - NOTE: group and wildcard limits are not applied to root.</span><br><span class="line">#          To apply a limit to the root user, &lt;domain&gt; must be</span><br><span class="line">#          the literal username root.</span><br><span class="line">#</span><br><span class="line">#&lt;type&gt; can have the two values:</span><br><span class="line">#        - &quot;soft&quot; for enforcing the soft limits</span><br><span class="line">#        - &quot;hard&quot; for enforcing hard limits</span><br><span class="line">#</span><br><span class="line">#&lt;item&gt; can be one of the following:</span><br><span class="line">#        - core - limits the core file size (KB)</span><br><span class="line">#        - data - max data size (KB)</span><br><span class="line">#        - fsize - maximum filesize (KB)</span><br><span class="line">#        - memlock - max locked-in-memory address space (KB)</span><br><span class="line">#        - nofile - max number of open files</span><br><span class="line">#        - rss - max resident set size (KB)</span><br><span class="line">#        - stack - max stack size (KB)</span><br><span class="line">#        - cpu - max CPU time (MIN)</span><br><span class="line">#        - nproc - max number of processes</span><br><span class="line">#        - as - address space limit (KB)</span><br><span class="line">#        - maxlogins - max number of logins for this user</span><br><span class="line">#        - maxsyslogins - max number of logins on the system</span><br><span class="line">#        - priority - the priority to run user process with</span><br><span class="line">#        - locks - max number of file locks the user can hold</span><br><span class="line">#        - sigpending - max number of pending signals</span><br><span class="line">#        - msgqueue - max memory used by POSIX message queues (bytes)</span><br><span class="line">#        - nice - max nice priority allowed to raise to values: [-20, 19]</span><br><span class="line">#        - rtprio - max realtime priority</span><br><span class="line">#        - chroot - change root to directory (Debian-specific)</span><br><span class="line">#</span><br><span class="line">#&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#*               soft    core            0</span><br><span class="line">#root            hard    core            100000</span><br><span class="line">#*               hard    rss             10000</span><br><span class="line">#@student        hard    nproc           20</span><br><span class="line">#@faculty        soft    nproc           20</span><br><span class="line">#@faculty        hard    nproc           50</span><br><span class="line">#ftp             hard    nproc           0</span><br><span class="line">#ftp             -       chroot          /ftp</span><br><span class="line">#@student        -       maxlogins       4</span><br><span class="line"># End of file</span><br></pre></td></tr></table></figure>
<p>我们发现里面的说明注释还是很全的，照着弄就好了。这里我们一般是添加一句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myths soft npro 200</span><br><span class="line">myths hard npro 200</span><br></pre></td></tr></table></figure>
<p>最后保存下文件并且注销下用户，重新登陆回来可以看到配置已经更改。</p>
<hr>
<p>注：我在这里发现了一个问题，就是在我的ubuntu 14,04 上，用修改配置文件的方法修改后会导致系统崩溃。。原因不明，可能是进程数设置小了吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/09/%E4%B8%80%E4%B8%AA%E6%89%B9%E9%87%8F%E6%94%B9%E4%BD%9C%E4%B8%9A%E7%9A%84shell%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/09/%E4%B8%80%E4%B8%AA%E6%89%B9%E9%87%8F%E6%94%B9%E4%BD%9C%E4%B8%9A%E7%9A%84shell%E8%84%9A%E6%9C%AC/" itemprop="url">一个批量改作业的shell脚本</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-09T15:19:12+00:00">
                2015-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>作为一名C语言助教，最恶心的事情莫过于改作业了，尤其是我们学校这种对输入输出都没有严格要求的题目，不能通过类似OJ的判题系统批量批改的，原则上是只能手动批改的。但是一直做着相同的简单的劳动真的很让人发疯，而作为一名程序员，对待这样的任务很自然就想到了编程。考虑了我现在略懂的语言，对于这种直接和文件达交道的事，我很自然的选择了使用shell脚本。虽然我对shell脚本其实是一窍不通的，然而正巧身边有一本关于这个的书，就花了一个晚上的时间倒腾了一下，有问题了就翻一下资料，差不多把这个小程序弄了个框架。</p>
<p>其实想想，实现的东西也很简单，但是还是花了我不少的功夫。毕竟，这是我写的第一个实用的shell脚本呢。</p>
<p>实现的功能很简单，就是在文件夹下处理一堆的源文件，把编译之后的输出结果与标准答案(146)比较，如果包含标准答案，就判Ａ，当然如果没有加注释，就只能判为Ｂ，如果编译通过了，就判Ｃ／Ｄ，否则判Ｅ。</p>
<p>源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">find . -name &quot;*.cpp&quot;&gt;mulu</span><br><span class="line">sort mulu&gt;tmp;</span><br><span class="line">cp tmp mulu</span><br><span class="line">rm tmp</span><br><span class="line">while read line</span><br><span class="line">do</span><br><span class="line">	g++ $line&gt;log</span><br><span class="line">	if [ ! -s log ];then</span><br><span class="line">		touch tmp;</span><br><span class="line">		( ./a.out &lt;tmp )&gt;ans</span><br><span class="line">		(cat ans | egrep &quot;146&quot;)&gt;tmp</span><br><span class="line">		if [ -s tmp ];then</span><br><span class="line">			(cat $line|egrep &quot;//&quot;)&gt;t1</span><br><span class="line">			(cat $line|egrep &quot;/*&quot;)&gt;t2</span><br><span class="line">			if [ -s t1 ] || [ -s t2 ];then</span><br><span class="line">				echo $line is A</span><br><span class="line">			else</span><br><span class="line">				echo $line is B</span><br><span class="line">			fi</span><br><span class="line">			rm t1 t2</span><br><span class="line">		else</span><br><span class="line">			echo $line is C/D</span><br><span class="line">		fi</span><br><span class="line">		rm ans a.out tmp</span><br><span class="line">	else</span><br><span class="line">		echo $line is E</span><br><span class="line">	fi</span><br><span class="line">	rm log</span><br><span class="line">done &lt; mulu</span><br><span class="line">rm mulu</span><br></pre></td></tr></table></figure>
<p>这里涉及到很多的用法，我们只介绍当前用到的，就不去拓展了。</p>
<ol>
<li>find [地址] -name [正则表达式] 　该命令会搜索[地址]内符合[正则表达式]的文件名，并输出，这里我把输出重定向到mulu文件中。</li>
<li>sort [文件]　命令，就是把文件内容排序并显示出来(不会改变源文件)，这里重定向到tmp。</li>
<li>重定向命令　&gt; 表示删除写入　&gt;&gt;表示追加写入</li>
<li>cat [文件] | egrep [正则表达式]　表示在[文件]中查找能匹配[正则表达式]的行，并且输出。</li>
<li>[ -s file ]　表示判断file是否存在且非空。</li>
</ol>
<p>逻辑还是很清楚的，写起来也很简单。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.resonanat.com/2015/11/08/tar%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Resive world">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/08/tar%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" itemprop="url">tar命令基本用法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-08T15:08:05+00:00">
                2015-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Linux里文件压缩解压打包神马的还是很有用的，比如要向服务器上传一堆小东西（特别像网站的移植），挨个上传的话会特别特别的慢。这时候用一个打包命令来处理就尤为重要了。实际上这类的命令有很多（比如 cpio命令，lzma命令，gunzip命令，bunzip命令等等），但是最常用的还是今天介绍的tar命令。</p>
<p>首先介绍一些比较常见的用法，就是什么打包，解包，压缩，解压缩这些的一般晓得这些用法就够用了。</p>
<h2 id="打包命令"><a href="#打包命令" class="headerlink" title="打包命令"></a>打包命令</h2><p><code>tar -cvf [生成的文件] [需打包的文件1] [需打包的文件2] [需打包的文件3]...</code></p>
<p>需要说明的是这里的生成文件一般.tar结尾以让人分辨出这是个包包（特殊目的除外）。</p>
<p>很自然的问题是，这里带了一个-cvf参数，这是什么呢？</p>
<p>其实-cvf并不是一个参数，而是三个参数：</p>
<p>-c [–create]   表示创建新的归档文件（很明显这是很必要的，要不然电脑怎么知道你是要打包还是要解包呢？）</p>
<p>-v [–verbose] 显示命令的执行过程（实际上就显示下包里的文件，不是特别必要，但习惯还是写了）</p>
<p>-f [–file&#x3D;]  指定备份文件名或设备（当然是必须的，否则怎么知道打包到哪里，这里需要注意的是，f参数后面一定是紧跟这生成的文件名的，即他必须是所有选项的最后一个）</p>
<p>打包基本就是这样了。</p>
<h2 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h2><p>需要注意的是，用tar命令打包生成的文件其实只是一个包，数据并没有得到压缩。真正的压缩文件应该是需要一个压缩参数的：</p>
<ul>
<li><p>用gzip压缩格式进行压缩：<br><code>tar -zcvf [生成的文件] [需打包的文件1] [需打包的文件2] [需打包的文件3]...</code><br>-z [–gzip, –gunzip, –ungzip]  使用gzip命令处理备份文件（这时候需要注意的就是生成文件最好要以.tar.gz结尾，让人晓得你这是用啥压缩的，人家好用相应的命令解压）</p>
</li>
<li><p>用bzip压缩格式进行压缩：<br><code>tar -jcvf [生成的文件] [需打包的文件1] [需打包的文件2] [需打包的文件3]...</code><br>-j [–I –bzip ]  使用bzip2命令处理备份文件（通常以.tar.bz2结尾）</p>
</li>
</ul>
<h2 id="解包命令"><a href="#解包命令" class="headerlink" title="解包命令"></a>解包命令</h2><p><code>tar -xvf [生成的文件] [包包] </code></p>
<p>我们把打包命令的-c参数换成-x参数就可以了。</p>
<p>-x [–extract, –get] 从归档文件中解析文件（用法和-c一致）</p>
<h2 id="解压命令"><a href="#解压命令" class="headerlink" title="解压命令"></a>解压命令</h2><p>与两种压缩方式对应的就是两种解压方式喽～</p>
<p><code>tar -zxvf [生成的文件] [包包] </code></p>
<p><code>tar -jxvf [生成的文件] [包包] </code></p>
<h2 id="查看包包的命令"><a href="#查看包包的命令" class="headerlink" title="查看包包的命令"></a>查看包包的命令</h2><p>当我们想看看包里有啥却不想解压包包的时候我们可以用-t参数：</p>
<p><code>tar -tvf [你的包包] </code></p>
<p>-t [–list] 列出归档文件内容目录（-t 参数和-c 以及-x 参数是互斥的，前面也可以搭配-z -j之类的压缩参数，这一点视情况而定）</p>
<h2 id="指定解压文件夹"><a href="#指定解压文件夹" class="headerlink" title="指定解压文件夹"></a>指定解压文件夹</h2><p>tar命令的解压地址实际上是按照相对路径来的，如果非得用绝对路径的话，需要加上-C参数来指定绝对路径：</p>
<p><code>tar -zxvf /tmp/etc.tar.gz -C /tmp </code></p>
<hr>
<p>以上就是tar命令的基础用法，当然，tar命令还有很多高级用法，不过一般用的比较少了，这里就不详细说了，以后需要用到就去翻文档吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/51/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/51/">51</a><span class="page-number current">52</span><a class="page-number" href="/page/53/">53</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/">57</a><a class="extend next" rel="next" href="/page/53/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">566</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">67</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">278</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Companyd</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
